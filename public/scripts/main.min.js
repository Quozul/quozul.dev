function link(e){console.log(document.location.protocol+"//"+document.location.host+"/"+e);const t=document.getElementsByTagName("main")[0];request(document.location.protocol+"//"+document.location.host+"/"+e+"/view").then(s=>{window.history.pushState("","",e),s.response.includes("<!--noAjax-->")&&window.location.reload(),t.innerHTML=s.response,handleDates()});const s=document.getElementsByTagName("header")[0];request(document.location.protocol+"//"+document.location.host+"/header?page="+e.replace("/","")).then(e=>{s.innerHTML=e.response,generateMenu()})}function discorvers(){const e=document.getElementsByClassName("page-current")[0].getElementsByClassName("discover"),t=[];for(const s in e)e.hasOwnProperty(s)&&t.push(e[s]);t.forEach((e,t)=>{setTimeout(function(){e.classList.remove("discover")},50*t)})}function scroll(e){const t=document.getElementsByClassName("page-current")[0],s=(document.getElementsByClassName("stars")[0],t.firstElementChild.scrollTop+t.firstElementChild.offsetHeight);if(e){if(Math.abs(s-t.firstElementChild.scrollHeight)>1)return;const e=t.nextElementSibling;if(null==e||""==e.id)return;e.classList.add("page-current"),e.classList.remove("page-down"),t.classList.add("page-up")}else{if(0!=t.firstElementChild.scrollTop)return;const e=t.previousElementSibling;if(null==e||""==e.id)return;e.classList.add("page-current"),t.classList.add("page-down"),t.classList.remove("page-up")}t.classList.remove("page-current"),discorvers(),document.getElementsByClassName("selected")[0].classList.remove("selected");const n=getChildNumber(document.getElementsByClassName("page-current")[0]);document.getElementsByClassName("menu-entry")[n].classList.add("selected")}function scrollto(e,t,s){const n=document.getElementsByClassName("page-current")[0],o=document.getElementById(t),l=getChildNumber(n)-getChildNumber(o);if(0!=l){if(l>0?(n.classList.add("page-down"),o.classList.remove("page-up")):(n.classList.add("page-up"),o.classList.remove("page-down")),Math.abs(l)>1)for(let e=Math.min(getChildNumber(n),getChildNumber(o))+1;e<Math.max(getChildNumber(n),getChildNumber(o));e++){const t=document.getElementsByClassName("page")[e];l>0?(t.classList.add("page-down"),t.classList.remove("page-up")):(t.classList.add("page-up"),t.classList.remove("page-down"))}n.classList.remove("page-current"),o.classList.add("page-current"),document.getElementsByClassName("selected")[0].classList.remove("selected"),null==s?e.classList.add("selected"):document.getElementById("menu").childNodes[getChildNumber(document.getElementsByClassName("page-current")[0])].classList.add("selected"),discorvers(),togglePhoneMenu()}}function togglePhoneMenu(){const e=document.getElementById("menu");"translateY(0px)"==e.style.transform?e.style.transform="":e.style.transform="translateY(0px)",this.classList.contains("flip")?this.classList.remove("flip"):this.classList.add("flip")}function generateMenu(){const e=document.getElementsByClassName("page"),t=document.getElementById("menu-sections");t.innerHTML="";for(const s in e)if(e.hasOwnProperty(s)){const n=e[s],o=n.getAttribute("name"),l=n.getAttribute("id"),a=document.createElement("li");a.innerHTML=o,a.classList.add("menu-entry"),a.setAttribute("onclick",`scrollto(this, '${l}')`),0==s&&a.classList.add("selected"),t.appendChild(a)}}function handleDates(){const e=document.getElementsByClassName("date");for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];s.innerHTML=new Date(parseInt(s.innerHTML)).toLocaleString()}}document.addEventListener("wheel",function(e){0!=e.deltaY&&scroll(e.deltaY>0)});const menuEntries=document.getElementById("menu").children;for(const e in menuEntries)menuEntries.hasOwnProperty(e)&&menuEntries[e].addEventListener("click",function(){document.getElementById("menu").style.transform=""});(function(){let e,t,s;document.addEventListener("touchstart",function(t){document.getElementsByClassName("page-current")[0].style.transition="0s",e=t.changedTouches[0].pageY},!1),document.addEventListener("touchmove",function(n){const o=document.getElementsByClassName("page-current")[0],l=o.firstElementChild.scrollTop+o.firstElementChild.offsetHeight,a=n.changedTouches[0].pageY;l!=o.firstElementChild.scrollHeight&&0!=o.firstElementChild.scrollTop?o.style.transform="":o.style.transform=`translateY(${a-e}px)`,t!=a&&(s=a-t,t=a)},!1),document.addEventListener("touchend",function(e){const t=document.getElementsByClassName("page-current")[0];t.style.transition="",t.style.transform="",0!=s&&scroll(s<0),s=0},!1)})(),window.addEventListener("load",generateMenu),window.addEventListener("load",handleDates);