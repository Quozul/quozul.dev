(()=>{"use strict";var t={116:(t,e,n)=>{var r;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){var u,o,s,c=arguments,d=(u=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LlopSZWN]|"[^"]*"|'[^']*'/g,o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g,function(t,e,n,r){if(1!==c.length||"string"!==y(t)||/\d/.test(t)||(e=t,t=void 0),(t=t||0===t?t:new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var a=(e=String(d.masks[e]||e||d.masks.default)).slice(0,4);"UTC:"!==a&&"GMT:"!==a||(e=e.slice(4),n=!0,"GMT:"===a&&(r=!0));var i=function(){return n?"getUTC":"get"},h=function(){return t[i()+"Date"]()},g=function(){return t[i()+"Day"]()},v=function(){return t[i()+"Month"]()},p=function(){return t[i()+"FullYear"]()},M=function(){return t[i()+"Hours"]()},b=function(){return t[i()+"Minutes"]()},S=function(){return t[i()+"Seconds"]()},T=function(){return t[i()+"Milliseconds"]()},D=function(){return n?0:t.getTimezoneOffset()},w={d:function(){return h()},dd:function(){return f(h())},ddd:function(){return d.i18n.dayNames[g()]},dddd:function(){return d.i18n.dayNames[g()+7]},m:function(){return v()+1},mm:function(){return f(v()+1)},mmm:function(){return d.i18n.monthNames[v()]},mmmm:function(){return d.i18n.monthNames[v()+12]},yy:function(){return String(p()).slice(2)},yyyy:function(){return f(p(),4)},h:function(){return M()%12||12},hh:function(){return f(M()%12||12)},H:function(){return M()},HH:function(){return f(M())},M:function(){return b()},MM:function(){return f(b())},s:function(){return S()},ss:function(){return f(S())},l:function(){return f(T(),3)},L:function(){return f(Math.floor(T()/10))},t:function(){return M()<12?d.i18n.timeNames[0]:d.i18n.timeNames[1]},tt:function(){return M()<12?d.i18n.timeNames[2]:d.i18n.timeNames[3]},T:function(){return M()<12?d.i18n.timeNames[4]:d.i18n.timeNames[5]},TT:function(){return M()<12?d.i18n.timeNames[6]:d.i18n.timeNames[7]},Z:function(){return r?"GMT":n?"UTC":(String(t).match(o)||[""]).pop().replace(s,"").replace(/GMT\+0000/g,"UTC")},o:function(){return(D()>0?"-":"+")+f(100*Math.floor(Math.abs(D())/60)+Math.abs(D())%60,4)},p:function(){return(D()>0?"-":"+")+f(Math.floor(Math.abs(D())/60),2)+":"+f(Math.floor(Math.abs(D())%60),2)},S:function(){return["th","st","nd","rd"][h()%10>3?0:(h()%100-h()%10!=10)*h()%10]},W:function(){return m(t)},N:function(){return l(t)}};return e.replace(u,(function(t){return t in w?w[t]():t.slice(1,t.length-1)}))});d.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},d.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};var f=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},m=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);var a=(e-n)/6048e5;return 1+Math.floor(a)},l=function(t){var e=t.getDay();return 0===e&&(e=7),e},y=function(t){return null===t?"null":void 0===t?"undefined":"object"!==a(t)?a(t):Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()};void 0===(r=function(){return d}.call(e,n,e,t))||(t.exports=r)}(void 0)},945:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(40),a=n(675),i=function(){function t(t,e){this.meta=t,this.data=e,this.dayStats=[],this.words=[],this.hours=[],this.userStats=[]}return t.sumStats=function(t){for(var e=Array.from(t).sort((function(t,e){return t[0]-e[0]})),n=0;n<e.length;n++)if(void 0!==e[n][1]){var r=e[n][1],a=0,i=0;n>0&&(a=e[n-1][1].total,i=e[n-1][1].total_embeds),e[n][1].total=a+r.messages;var u=Object.values(r.embeds),o=0;u.length>0&&(o=u.reduce((function(t,e){return t+e}))),e[n][1].total_embeds=i+o}return e},t.prototype.dailyStats=function(){var e=new Map,n=new Map,i=new Map,u=new Map;if(void 0!==this.data){var o=function(t){if(void 0===s.data[t])return"continue";var o=s.data[t],c=new Date(o.t),d=a.padZeros(c.getHours(),2)+":"+a.padZeros(c.getMinutes(),2);u.set(d,(u.get(d)||0)+1),c.setHours(0,0,0,0);var f=o.m,m=o.e||null,l=Object.assign(s.meta.users[s.meta.userindex[o.u]],{id:s.meta.userindex[o.u],index:o.u}),y=e.get(c.getTime())||r.initStatsObject();y.messages++,null!==m&&m.forEach((function(t){y.embeds[t.type]=y.embeds[t.type]||0,y.embeds[t.type]++})),y.recipients.includes(l.index)||y.recipients.push(l.index),e.set(c.getTime(),y),void 0!==f&&f.toLowerCase().split(/\s/gi).map((function(t){return t.trim()})).filter((function(t){return t.length>0})).forEach((function(t){i.set(t,(i.get(t)||0)+1)}));var h=n.get(c.getTime())||{};h[l.index]=(h[l.index]||0)+1,n.set(c.getTime(),h)},s=this;for(var c in this.data)o(c);var d=new Date(Date.now()).setHours(0,0,0,0);e.has(d)||e.set(d,r.initStatsObject()),this.dayStats=t.sumStats(e),this.words=Array.from(i).sort((function(t,e){return e[1]-t[1]})).filter((function(t){return t[1]>100})),this.hours=Array.from(u).sort((function(t,e){return t[0].localeCompare(e[0])})),this.userStats=Array.from(n).sort((function(t,e){return t[0]-e[0]}))}},t}();e.default=i},675:function(t,e,n){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,o=i.length;u<o;u++,a++)r[a]=i[u];return r},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.padZeros=e.CreateSheetData=e.CreateSingleSheetData=e.sVerticalPush=e.verticalPush=e.SumObjects=void 0;var i=a(n(116));function u(t,e){for(var n,r=0,a=0;a<e.length;a++)void 0===t[a]&&(t[a]=new Array(r)),r=t[a].length,(n=t[a]).push.apply(n,e[a]);return t}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1;n>0;n--)t[n-1]=u(t[n-1],t[n]);return t[0]}function s(t){return t.map((function(t){var e=Object.values(t[1]).map((function(t){switch(typeof t){case"object":return t instanceof Array?t.length:Object.keys(t).length>0?Object.values(t).reduce((function(t,e){return t+e})):0;default:return t}}));return r([i.default(t[0],"yyyy-mm-dd")],e)}))}e.SumObjects=function t(e,n,r){void 0===r&&(r=!1);for(var a=[],i=0,u=Object.keys(e).concat(Object.keys(n));i<u.length;i++){var o=u[i];a.includes(o)||a.push(o)}for(var s=function(r){switch(void 0!==e[r]?typeof e[r]:typeof n[r]){case"number":case"bigint":case"string":void 0!==e[r]&&void 0!==n[r]?e[r]=e[r]+n[r]:void 0!==n[r]?e[r]=n[r]:void 0!==e[r]?e[r]=e[r]:e[r]=0;break;case"object":e[r]instanceof Array?n[r].forEach((function(t){e[r].includes(t)||e[r].push(t)})):e[r]=t(e[r],n[r])}},c=0,d=a;c<d.length;c++)s(d[c]);return e},e.verticalPush=u,e.sVerticalPush=o,e.CreateSingleSheetData=s,e.CreateSheetData=function(t,e,n){return 0===e.length&&(e=[["",""]]),o(s(t),e,n)},e.padZeros=function(t,e){return t.toString().padStart(e,"0")}},40:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.initStatsObject=void 0,e.initStatsObject=function(){return{messages:0,embeds:{},total:0,recipients:[],total_embeds:0}}},507:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(945)),i=self;i.addEventListener("message",(function(t){var e=t.data,n=Date.now(),r=new a.default(e.meta,e.channelData);r.dailyStats();var u=Date.now()-n,o={id:e.channelId,stats:r.dayStats,words:r.words,hours:r.hours,userStats:r.userStats,elapsed:u};i.postMessage(o)}))}},e={};!function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}(507)})();